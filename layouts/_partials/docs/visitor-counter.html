<div class="visitor-widget" aria-label="총 방문자">
  <div class="visitor-widget__label">총 방문자</div>
  <div class="visitor-widget__value" id="total-visitors">--</div>
</div>

<style>
.visitor-widget {
  padding: 1rem 1.25rem;
  margin-bottom: 1.25rem;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-background-alt);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  text-align: center;
}

.visitor-widget__label {
  font-size: 0.75rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--color-text-muted);
  font-weight: 600;
  margin-bottom: 1rem;
}

.visitor-widget__value {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--color-text);
  font-family: 'Courier New', monospace;
}

[data-theme="dark"] .visitor-widget {
  border: 1px solid var(--gray-500);
}


</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // GoatCounter로 방문자 카운터 표시
  const siteCode = '{{ .Site.Params.goatCounterCode | default "" }}';

  if (!siteCode) {
    console.log('GoatCounter site code is missing.');
    return;
  }

  const totalUrl = `https://${siteCode}.goatcounter.com/counter/TOTAL.json`;

  function fetchCount(url, elementId) {
    fetch(url)
      .then(response => response.json())
      .then(data => {
        document.getElementById(elementId).textContent = data.count || '0';
      })
      .catch(error => {
        console.log('GoatCounter counter failed to load:', error);
      });
  }

  fetchCount(totalUrl, 'total-visitors');
});
</script>

{{- with .Site.Params.goatCounterCode -}}
  <script data-goatcounter="https://{{ . }}.goatcounter.com/count"
    async src="//gc.zgo.at/count.js"></script>
{{- end -}}